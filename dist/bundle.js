/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Action.js":
/*!***********************!*\
  !*** ./src/Action.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Action = {\n  equal: 0,\n  \"delete\": 1,\n  insert: 2,\n  none: 3,\n  replace: 4\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Action);\n\n//# sourceURL=webpack://htmldiff/./src/Action.js?");

/***/ }),

/***/ "./src/Match.js":
/*!**********************!*\
  !*** ./src/Match.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Match)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Match = /*#__PURE__*/function () {\n  function Match(startInOld, startInNew, size) {\n    _classCallCheck(this, Match);\n    this.startInOld = startInOld;\n    this.startInNew = startInNew;\n    this.size = size;\n  }\n  return _createClass(Match, [{\n    key: \"endInOld\",\n    get: function get() {\n      return this.startInOld + this.size;\n    }\n  }, {\n    key: \"endInNew\",\n    get: function get() {\n      return this.startInNew + this.size;\n    }\n  }]);\n}();\n\n;\n\n//# sourceURL=webpack://htmldiff/./src/Match.js?");

/***/ }),

/***/ "./src/MatchFinder.js":
/*!****************************!*\
  !*** ./src/MatchFinder.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MatchFinder)\n/* harmony export */ });\n/* harmony import */ var _Match__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Match */ \"./src/Match.js\");\n/* harmony import */ var _MatchOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MatchOptions */ \"./src/MatchOptions.js\");\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\nfunction putNewWord(block, word, blockSize) {\n  block.push(word);\n  if (block.length > blockSize) {\n    block.shift();\n  }\n  if (block.length !== blockSize) {\n    return null;\n  }\n  return block.join('');\n}\n\n// Finds the longest match in given texts. It uses indexing with fixed granularity that is used to compare blocks of text.\nvar MatchFinder = /*#__PURE__*/function () {\n  function MatchFinder(oldWords, newWords, startInOld, endInOld, startInNew, endInNew, options) {\n    _classCallCheck(this, MatchFinder);\n    this.oldWords = oldWords;\n    this.newWords = newWords;\n    this.startInOld = startInOld;\n    this.endInOld = endInOld;\n    this.startInNew = startInNew;\n    this.endInNew = endInNew;\n    this.options = options;\n  }\n  return _createClass(MatchFinder, [{\n    key: \"indexNewWords\",\n    value: function indexNewWords() {\n      this.wordIndices = new Map();\n      var block = [];\n      for (var i = this.startInNew; i < this.endInNew; i++) {\n        // if word is a tag, we should ignore attributes as attribute changes are not supported (yet)\n        var word = this.normalizeForIndex(this.newWords[i]);\n        var key = putNewWord(block, word, this.options.blockSize);\n        if (key === null) {\n          continue;\n        }\n        if (this.wordIndices.has(key)) {\n          this.wordIndices.get(key).push(i);\n        } else {\n          this.wordIndices.set(key, [i]);\n        }\n      }\n    }\n\n    // Converts the word to index-friendly value so it can be compared with other similar words\n  }, {\n    key: \"normalizeForIndex\",\n    value: function normalizeForIndex(word) {\n      word = _Utils__WEBPACK_IMPORTED_MODULE_2__.stripAnyAttributes(word);\n      if (this.options.IgnoreWhiteSpaceDifferences && _Utils__WEBPACK_IMPORTED_MODULE_2__.isWhiteSpace(word)) {\n        return ' ';\n      }\n      return word;\n    }\n  }, {\n    key: \"findMatch\",\n    value: function findMatch() {\n      var _this = this;\n      this.indexNewWords();\n      this.removeRepeatingWords();\n      if (this.wordIndices.length === 0) {\n        return null;\n      }\n      var bestMatchInOld = this.startInOld;\n      var bestMatchInNew = this.startInNew;\n      var bestMatchSize = 0;\n      var matchLengthAt = new Map();\n      var blockSize = this.options.blockSize;\n      var block = [];\n      var _loop = function _loop(indexInOld) {\n          var word = _this.normalizeForIndex(_this.oldWords[indexInOld]);\n          var index = putNewWord(block, word, blockSize);\n          if (index === null) {\n            return 0; // continue\n          }\n          var newMatchLengthAt = new Map();\n          if (!_this.wordIndices.has(index)) {\n            matchLengthAt = newMatchLengthAt;\n            return 0; // continue\n          }\n          var _iterator = _createForOfIteratorHelper(_this.wordIndices.get(index)),\n            _step;\n          try {\n            var _loop2 = function _loop2() {\n              var indexInNew = _step.value;\n              var newMatchLength = (matchLengthAt.has(indexInNew - 1) ? matchLengthAt.get(indexInNew - 1) : 0) + 1;\n              newMatchLengthAt.set(indexInNew, newMatchLength);\n              if (newMatchLength > bestMatchSize) {\n                var oldInBlock = false;\n                var newInBlock = false;\n                _this.options.oldFigureBlocks.forEach(function (block, i) {\n                  if (indexInOld >= block[0] && indexInOld <= block[1]) {\n                    oldInBlock = true;\n                  }\n                });\n                _this.options.newFigureBlocks.forEach(function (block, i) {\n                  if (indexInNew >= block[0] && indexInNew <= block[1]) {\n                    newInBlock = true;\n                  }\n                });\n\n                // only consider best match if the old text and the new text BOTH are/are not in a special handling tag blocks\n                // we don't want to match text in a figcaption tag to text *not* in a figcaption tag\n                // it corrupts the HTML, among other undesired impacts\n                if (oldInBlock == newInBlock) {\n                  bestMatchInOld = indexInOld - newMatchLength - blockSize + 2;\n                  bestMatchInNew = indexInNew - newMatchLength - blockSize + 2;\n                  bestMatchSize = newMatchLength;\n                }\n              }\n            };\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              _loop2();\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          matchLengthAt = newMatchLengthAt;\n        },\n        _ret;\n      for (var indexInOld = this.startInOld; indexInOld < this.endInOld; indexInOld++) {\n        _ret = _loop(indexInOld);\n        if (_ret === 0) continue;\n      }\n      return bestMatchSize !== 0 ? new _Match__WEBPACK_IMPORTED_MODULE_0__[\"default\"](bestMatchInOld, bestMatchInNew, bestMatchSize + blockSize - 1) : null;\n    }\n\n    // This method removes words that occur too many times. This way it reduces total count of comparison operations\n    // and as result the diff algoritm takes less time. But the side effect is that it may detect false differences of\n    // the repeating words.\n  }, {\n    key: \"removeRepeatingWords\",\n    value: function removeRepeatingWords() {\n      var threshold = this.newWords.length + this.options.repeatingWordsAccuracy;\n      var repeatingWords = Array.from(this.wordIndices.entries()).filter(function (i) {\n        return i[1].length > threshold;\n      }).map(function (i) {\n        return i[0];\n      });\n      var _iterator2 = _createForOfIteratorHelper(repeatingWords),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var w = _step2.value;\n          this.wordIndices[\"delete\"](w);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }]);\n}();\n\n\n//# sourceURL=webpack://htmldiff/./src/MatchFinder.js?");

/***/ }),

/***/ "./src/MatchOptions.js":
/*!*****************************!*\
  !*** ./src/MatchOptions.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MatchOptions)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nvar MatchOptions = /*#__PURE__*/_createClass(function MatchOptions() {\n  _classCallCheck(this, MatchOptions);\n  this.blockSize = 0;\n  this.repeatingWordsAccuracy = 0.0;\n  this.ignoreWhitespaceDifferences = false;\n});\n\n\n//# sourceURL=webpack://htmldiff/./src/MatchOptions.js?");

/***/ }),

/***/ "./src/Mode.js":
/*!*********************!*\
  !*** ./src/Mode.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Mode = {\n  character: 0,\n  tag: 1,\n  whitespace: 2,\n  entity: 3\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Mode);\n\n//# sourceURL=webpack://htmldiff/./src/Mode.js?");

/***/ }),

/***/ "./src/Operation.js":
/*!**************************!*\
  !*** ./src/Operation.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Operation)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nvar Operation = /*#__PURE__*/_createClass(function Operation(action, startInOld, endInOld, startInNew, endInNew) {\n  _classCallCheck(this, Operation);\n  this.action = action;\n  this.startInOld = startInOld;\n  this.endInOld = endInOld;\n  this.startInNew = startInNew;\n  this.endInNew = endInNew;\n});\n\n\n//# sourceURL=webpack://htmldiff/./src/Operation.js?");

/***/ }),

/***/ "./src/Utils.js":
/*!**********************!*\
  !*** ./src/Utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isEndOfEntity: () => (/* binding */ isEndOfEntity),\n/* harmony export */   isEndOfTag: () => (/* binding */ isEndOfTag),\n/* harmony export */   isStartOfEntity: () => (/* binding */ isStartOfEntity),\n/* harmony export */   isStartOfTag: () => (/* binding */ isStartOfTag),\n/* harmony export */   isTag: () => (/* binding */ isTag),\n/* harmony export */   isWhiteSpace: () => (/* binding */ isWhiteSpace),\n/* harmony export */   isWord: () => (/* binding */ isWord),\n/* harmony export */   stripAnyAttributes: () => (/* binding */ stripAnyAttributes),\n/* harmony export */   stripTagAttributes: () => (/* binding */ stripTagAttributes),\n/* harmony export */   wrapText: () => (/* binding */ wrapText)\n/* harmony export */ });\nvar tagRegex = /^\\s*<\\/?[^>]+>\\s*$/;\nvar tagWordRegex = /<[^\\s>]+/;\nvar whitespaceRegex = /^(\\s|&nbsp;)+$/;\nvar wordRegex = /[\\w\\#@-]+/;\nvar specialCaseWordTags = ['<img'];\nfunction isTag(item) {\n  if (specialCaseWordTags.some(function (re) {\n    return item !== null && item.startsWith(re);\n  })) {\n    return false;\n  }\n  return tagRegex.test(item);\n}\nfunction stripTagAttributes(word) {\n  var tag = tagWordRegex.exec(word)[0];\n  word = tag + (\n  // do not strip out the figure class or the figcaption id\n  /<figure.+?class=\".*?table.*?\"/.test(word) || /<figure.+?class=\".*?image.*?\"/.test(word) ? ' class=\"' + word.match(/class=\".*?(table|image).*?\"/)[1] + '\"' : '') + (/<fig(?:ure|caption).+?id=\".+?\"/.test(word) ? ' id=\"' + word.match(/id=\"(.+?)\"/)[1] + '\"' : '') + (word.endsWith(\"/>\") ? \"/>\" : \">\");\n  return word;\n}\nfunction wrapText(text, tagName, cssClass) {\n  return ['<', tagName, ' class=\"', cssClass, '\">', text, '</', tagName, '>'].join('');\n}\nfunction isStartOfTag(val) {\n  return val === '<';\n}\nfunction isEndOfTag(val) {\n  return val === '>';\n}\nfunction isStartOfEntity(val) {\n  return val === '&';\n}\nfunction isEndOfEntity(val) {\n  return val === ';';\n}\nfunction isWhiteSpace(value) {\n  return whitespaceRegex.test(value);\n}\nfunction stripAnyAttributes(word) {\n  if (isTag(word)) {\n    return stripTagAttributes(word);\n  }\n  return word;\n}\nfunction isWord(text) {\n  return wordRegex.test(text);\n}\n\n\n//# sourceURL=webpack://htmldiff/./src/Utils.js?");

/***/ }),

/***/ "./src/WordSplitter.js":
/*!*****************************!*\
  !*** ./src/WordSplitter.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertHtmlToListOfWords: () => (/* binding */ convertHtmlToListOfWords)\n/* harmony export */ });\n/* harmony import */ var _Mode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Mode */ \"./src/Mode.js\");\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\n\n\nfunction convertHtmlToListOfWords(text, blockExpressions) {\n  var state = {\n    mode: _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character,\n    currentWord: [],\n    words: []\n  };\n  var blockLocations = findBlocks(text, blockExpressions);\n  var isBlockCheckRequired = !!blockLocations.size;\n  var isGrouping = false;\n  var groupingUntil = -1;\n  for (var i = 0; i < text.length; i++) {\n    var character = text[i];\n\n    // Don't bother executing block checks if we don't have any blocks to check for!\n    if (isBlockCheckRequired) {\n      // Check if we have completed grouping a text sequence/block\n      if (groupingUntil === index) {\n        groupingUntil = -1;\n        isGrouping = false;\n      }\n\n      // Check if we need to group the next text sequence/block\n      var until = 0;\n      if (blockLocations.has(index)) {\n        until = blockLocations.get(index);\n        isGrouping = true;\n        groupingUntil = until;\n      }\n\n      // if we are grouping, then we don't care about what type of character we have, it's going to be treated as a word\n      if (isGrouping) {\n        state.currentWord.push(character);\n        state.mode = _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character;\n        continue;\n      }\n    }\n    switch (state.mode) {\n      case _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character:\n        if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isStartOfTag(character)) {\n          addClearWordSwitchMode(state, '<', _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].tag);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isStartOfEntity(character)) {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].entity);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isWhiteSpace(character)) {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].whitespace);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isWord(character) && (state.currentWord.length === 0 || _Utils__WEBPACK_IMPORTED_MODULE_1__.isWord(state.currentWord[state.currentWord.length - 1]))) {\n          state.currentWord.push(character);\n        } else {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character);\n        }\n        break;\n      case _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].tag:\n        if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isEndOfTag(character)) {\n          state.currentWord.push(character);\n          state.words.push(state.currentWord.join(''));\n          state.currentWord = [];\n          state.mode = _Utils__WEBPACK_IMPORTED_MODULE_1__.isWhiteSpace(character) ? _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].whitespace : _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character;\n        } else {\n          state.currentWord.push(character);\n        }\n        break;\n      case _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].whitespace:\n        if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isStartOfTag(character)) {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].tag);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isStartOfEntity(character)) {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].entity);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isWhiteSpace(character)) {\n          state.currentWord.push(character);\n        } else {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character);\n        }\n        break;\n      case _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].entity:\n        if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isStartOfTag(character)) {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].tag);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isWhiteSpace(character)) {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].whitespace);\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isEndOfEntity(character)) {\n          var switchToNextMode = true;\n          if (state.currentWord.length !== 0) {\n            state.currentWord.push(character);\n            state.words.push(state.currentWord.join(''));\n\n            //join &nbsp; entity with last whitespace\n            if (state.words.length > 2 && _Utils__WEBPACK_IMPORTED_MODULE_1__.isWhiteSpace(state.words[state.words.length - 2]) && _Utils__WEBPACK_IMPORTED_MODULE_1__.isWhiteSpace(state.words[state.words.length - 1])) {\n              var w1 = state.words[state.words.length - 2];\n              var w2 = state.words[state.words.length - 1];\n              state.words.splice(state.words.length - 2, 2);\n              state.currentWord = [(w1 + w2).split()];\n              state.mode = _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].whitespace;\n              switchToNextMode = false;\n            }\n          }\n          if (switchToNextMode) {\n            state.currentWord = [];\n            state.mode = _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character;\n          }\n        } else if (_Utils__WEBPACK_IMPORTED_MODULE_1__.isWord(character)) {\n          state.currentWord.push(character);\n        } else {\n          addClearWordSwitchMode(state, character, _Mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].character);\n        }\n        break;\n    }\n  }\n  if (state.currentWord.length !== 0) {\n    state.words.push(state.currentWord.join(''));\n  }\n  return state.words;\n}\nfunction addClearWordSwitchMode(state, character, mode) {\n  if (state.currentWord.length !== 0) {\n    state.words.push(state.currentWord.join(''));\n  }\n  state.currentWord = [character];\n  state.mode = mode;\n}\nfunction findBlocks(text, blockExpressions) {\n  var blockLocations = new Map();\n  if (blockExpressions === null) {\n    return blockLocations;\n  }\n  var _iterator = _createForOfIteratorHelper(blockExpressions),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var exp = _step.value;\n      var m = void 0;\n      while ((m = exp.exec(text)) !== null) {\n        if (blockLocations.has(m.index)) {\n          throw new Error(\"One or more block expressions result in a text sequence that overlaps. Current expression: \" + exp.toString());\n        }\n        blockLocations.set(m.index, m.index + m[0].length);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return blockLocations;\n}\n\n\n//# sourceURL=webpack://htmldiff/./src/WordSplitter.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Action */ \"./src/Action.js\");\n/* harmony import */ var _Match__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Match */ \"./src/Match.js\");\n/* harmony import */ var _MatchFinder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MatchFinder */ \"./src/MatchFinder.js\");\n/* harmony import */ var _Operation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Operation */ \"./src/Operation.js\");\n/* harmony import */ var _MatchOptions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MatchOptions */ \"./src/MatchOptions.js\");\n/* harmony import */ var _WordSplitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WordSplitter */ \"./src/WordSplitter.js\");\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\n// This value defines balance between speed and memory utilization. The higher it is the faster it works and more memory consumes.\nvar MatchGranuarityMaximum = 10;\nvar specialCaseClosingTags = new Map([]);\nvar specialCaseOpeningTagRegex = /<((strong)|(b)|(i)|(dfn)|(em)|(big)|(small)|(u)|(sub)|(sup)|(strike)|(s))[\\>\\s]+/ig;\nvar HtmlDiff = /*#__PURE__*/function () {\n  function HtmlDiff(oldText, newText) {\n    _classCallCheck(this, HtmlDiff);\n    this.content = [];\n    this.newText = newText;\n    this.oldText = oldText;\n    this.specialTagDiffStack = [];\n    this.newWords = [];\n    this.oldWords = [];\n    this.matchGranularity = 0;\n    this.blockExpressions = [];\n    this.repeatingWordsAccuracy = 1.0;\n    this.ignoreWhiteSpaceDifferences = false;\n    this.orphanMatchThreshold = 0.0;\n  }\n  return _createClass(HtmlDiff, [{\n    key: \"build\",\n    value: function build() {\n      if (this.oldText === this.newText) {\n        return this.newText;\n      }\n      console.log(this.oldText);\n      console.log(this.newText);\n      this.splitInputsIntoWords();\n      this.matchGranularity = Math.min(MatchGranuarityMaximum, this.oldWords.length, this.newWords.length);\n      var operations = this.operations();\n      var _iterator = _createForOfIteratorHelper(operations),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          this.performOperation(item);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return this.content.join('');\n    }\n  }, {\n    key: \"addBlockExpression\",\n    value: function addBlockExpression(exp) {\n      this.blockExpressions.push(exp);\n    }\n  }, {\n    key: \"splitInputsIntoWords\",\n    value: function splitInputsIntoWords() {\n      this.oldWords = _WordSplitter__WEBPACK_IMPORTED_MODULE_5__.convertHtmlToListOfWords(this.oldText, this.blockExpressions);\n\n      //free memory, allow it for GC\n      this.oldText = null;\n      this.newWords = _WordSplitter__WEBPACK_IMPORTED_MODULE_5__.convertHtmlToListOfWords(this.newText, this.blockExpressions);\n\n      //free memory, allow it for GC\n      this.newText = null;\n    }\n  }, {\n    key: \"performOperation\",\n    value: function performOperation(opp) {\n      switch (opp.action) {\n        case _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].equal:\n          this.processEqualOperation(opp);\n          break;\n        case _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"][\"delete\"]:\n          this.processDeleteOperation(opp, \"diffdel\");\n          break;\n        case _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].insert:\n          this.processInsertOperation(opp, \"diffins\");\n          break;\n        case _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].none:\n          break;\n        case _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].replace:\n          this.processReplaceOperation(opp);\n          break;\n      }\n    }\n  }, {\n    key: \"processReplaceOperation\",\n    value: function processReplaceOperation(opp) {\n      this.processDeleteOperation(opp, \"diffmod\");\n      this.processInsertOperation(opp, \"diffmod\");\n    }\n  }, {\n    key: \"processInsertOperation\",\n    value: function processInsertOperation(opp, cssClass) {\n      var text = this.newWords.filter(function (s, pos) {\n        return pos >= opp.startInNew && pos < opp.endInNew;\n      });\n      this.insertTag(\"ins\", cssClass, text);\n    }\n  }, {\n    key: \"processDeleteOperation\",\n    value: function processDeleteOperation(opp, cssClass) {\n      var text = this.oldWords.filter(function (s, pos) {\n        return pos >= opp.startInOld && pos < opp.endInOld;\n      });\n      this.insertTag(\"del\", cssClass, text);\n    }\n  }, {\n    key: \"processEqualOperation\",\n    value: function processEqualOperation(opp) {\n      var result = this.newWords.filter(function (s, pos) {\n        return pos >= opp.startInNew && pos < opp.endInNew;\n      });\n      this.content.push(result.join(''));\n    }\n  }, {\n    key: \"insertTag\",\n    value: function insertTag(tag, cssClass, words) {\n      while (words.length) {\n        var nonTags = this.extractConsecutiveWords(words, function (x) {\n          return !_Utils__WEBPACK_IMPORTED_MODULE_6__.isTag(x);\n        });\n        var specialCaseTagInjection = '';\n        var specialCaseTagInjectionIsbefore = false;\n        if (nonTags.length !== 0) {\n          var text = _Utils__WEBPACK_IMPORTED_MODULE_6__.wrapText(nonTags.join(''), tag, cssClass);\n          this.content.push(text);\n        } else {\n          if (specialCaseOpeningTagRegex.test(words[0])) {\n            var matchedTag = words[0].match(specialCaseOpeningTagRegex);\n            matchedTag = '<' + matchedTag[0].replace(/(<|>| )/g, '') + '>';\n            this.specialTagDiffStack.push(matchedTag);\n            specialCaseTagInjection = '<ins class=\"mod\">';\n            if (tag === 'del') {\n              words.shift();\n              while (words.length > 0 && specialCaseOpeningTagRegex.test(words[0])) {\n                words.shift();\n              }\n            }\n          } else if (specialCaseClosingTags.has(words[0])) {\n            var openingTag = this.specialTagDiffStack.length === 0 ? null : this.specialTagDiffStack.pop();\n            if (!(openingTag === null || openingTag !== words[0].replace(/\\//g, ''))) {\n              specialCaseTagInjection = '</ins>';\n              specialCaseTagInjectionIsbefore = true;\n            }\n            if (tag === 'del') {\n              words.shift();\n              while (words.length > 0 && specialCaseClosingTags.has(words[0])) {\n                words.shift();\n              }\n            }\n          }\n          if (words.length === 0 && specialCaseTagInjection.length === 0) {\n            break;\n          }\n          if (specialCaseTagInjectionIsbefore) {\n            this.content.push(specialCaseTagInjection + this.extractConsecutiveWords(words, _Utils__WEBPACK_IMPORTED_MODULE_6__.isTag).join(''));\n          } else {\n            this.content.push(this.extractConsecutiveWords(words, _Utils__WEBPACK_IMPORTED_MODULE_6__.isTag).join('') + specialCaseTagInjection);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"extractConsecutiveWords\",\n    value: function extractConsecutiveWords(words, condition) {\n      var indexOfFirstTag = null;\n      for (var i = 0; i < words.length; i++) {\n        var word = words[i];\n        if (i === 0 && word === ' ') {\n          words[i] = '&nbsp;';\n        }\n        if (!condition(word)) {\n          indexOfFirstTag = i;\n          break;\n        }\n      }\n      if (indexOfFirstTag !== null) {\n        var items = words.filter(function (s, pos) {\n          return pos >= 0 && pos < indexOfFirstTag;\n        });\n        if (indexOfFirstTag > 0) {\n          words.splice(0, indexOfFirstTag);\n        }\n        return items;\n      } else {\n        var _items = words.filter(function (s, pos) {\n          return pos >= 0 && pos < words.length;\n        });\n        words.splice(0, words.length);\n        return _items;\n      }\n    }\n  }, {\n    key: \"operations\",\n    value: function operations() {\n      var positionInOld = 0;\n      var positionInNew = 0;\n      var operations = [];\n      var matches = this.matchingBlocks();\n      matches.push(new _Match__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.oldWords.length, this.newWords.length, 0));\n      var matchesWithoutOrphans = this.removeOrphans(matches);\n      var _iterator2 = _createForOfIteratorHelper(matchesWithoutOrphans),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var match = _step2.value;\n          var matchStartsAtCurrentPositionInOld = positionInOld === match.startInOld;\n          var matchStartsAtCurrentPositionInNew = positionInNew === match.startInNew;\n          console.log(\"performing operation\");\n          var action = void 0;\n          if (!matchStartsAtCurrentPositionInOld && !matchStartsAtCurrentPositionInNew) {\n            action = _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].replace;\n          } else if (matchStartsAtCurrentPositionInOld && !matchStartsAtCurrentPositionInNew) {\n            action = _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].insert;\n          } else if (!matchStartsAtCurrentPositionInOld) {\n            action = _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"][\"delete\"];\n          } else {\n            action = _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].none;\n          }\n          if (action !== _Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].none) {\n            operations.push(new _Operation__WEBPACK_IMPORTED_MODULE_3__[\"default\"](action, positionInOld, match.startInOld, positionInNew, match.startInNew));\n          }\n          if (match.length !== 0) {\n            operations.push(new _Operation__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_Action__WEBPACK_IMPORTED_MODULE_0__[\"default\"].equal, match.startInOld, match.endInOld, match.startInNew, match.endInNew));\n          }\n          positionInOld = match.endInOld;\n          positionInNew = match.endInNew;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return operations;\n    }\n  }, {\n    key: \"removeOrphans\",\n    value: /*#__PURE__*/_regeneratorRuntime().mark(function removeOrphans(matches) {\n      var prev, curr, _iterator3, _step3, next, tmp, sumLength, oldDistanceInChars, newDistanceInChars, currMatchLengthInChars;\n      return _regeneratorRuntime().wrap(function removeOrphans$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            prev = null;\n            curr = null;\n            _iterator3 = _createForOfIteratorHelper(matches);\n            _context.prev = 3;\n            _iterator3.s();\n          case 5:\n            if ((_step3 = _iterator3.n()).done) {\n              _context.next = 28;\n              break;\n            }\n            next = _step3.value;\n            if (!(curr === null)) {\n              _context.next = 11;\n              break;\n            }\n            prev = new _Match__WEBPACK_IMPORTED_MODULE_1__[\"default\"](0, 0, 0);\n            curr = next;\n            return _context.abrupt(\"continue\", 26);\n          case 11:\n            if (!(prev.endInOld === curr.startInOld && prev.endInNew === curr.startInNew || curr.endInOld === next.startInOld && curr.endInNew === next.startInNew)) {\n              _context.next = 17;\n              break;\n            }\n            _context.next = 14;\n            return curr;\n          case 14:\n            tmp = prev = curr; // \"let tmp\" avoids babel traspiling error\n            curr = next;\n            return _context.abrupt(\"continue\", 26);\n          case 17:\n            sumLength = function sumLength(t, n) {\n              return t + n.length;\n            };\n            oldDistanceInChars = this.oldWords.slice(prev.endInOld, next.startInOld).reduce(sumLength, 0);\n            newDistanceInChars = this.newWords.slice(prev.endInNew, next.startInNew).reduce(sumLength, 0);\n            currMatchLengthInChars = this.newWords.slice(curr.startInNew, curr.endInNew).reduce(sumLength, 0);\n            if (!(currMatchLengthInChars > Math.max(oldDistanceInChars, newDistanceInChars) * this.orphanMatchThreshold)) {\n              _context.next = 24;\n              break;\n            }\n            _context.next = 24;\n            return curr;\n          case 24:\n            prev = curr;\n            curr = next;\n          case 26:\n            _context.next = 5;\n            break;\n          case 28:\n            _context.next = 33;\n            break;\n          case 30:\n            _context.prev = 30;\n            _context.t0 = _context[\"catch\"](3);\n            _iterator3.e(_context.t0);\n          case 33:\n            _context.prev = 33;\n            _iterator3.f();\n            return _context.finish(33);\n          case 36:\n            _context.next = 38;\n            return curr;\n          case 38:\n          case \"end\":\n            return _context.stop();\n        }\n      }, removeOrphans, this, [[3, 30, 33, 36]]);\n    })\n  }, {\n    key: \"matchingBlocks\",\n    value: function matchingBlocks() {\n      var matchingBlocks = [];\n      var oldFigureBlocks = [];\n      var newFigureBlocks = [];\n\n      // get a list of ID pairs for special handling tag blocks\n      var i = -1;\n      while ((i = this.oldWords.indexOf('<figcaption>', i + 1)) != -1) {\n        var start = i;\n        var end = this.oldWords.indexOf('</figcaption>', i + 1);\n        oldFigureBlocks.push([start, end]);\n        i = end;\n      }\n      i = -1;\n      while ((i = this.newWords.indexOf('<figcaption>', i + 1)) != -1) {\n        var _start = i;\n        var _end = this.newWords.indexOf('</figcaption>', i + 1);\n        newFigureBlocks.push([_start, _end]);\n        i = _end;\n      }\n      i = -1;\n      this.findMatchingBlocks(0, this.oldWords.length, 0, this.newWords.length, matchingBlocks, oldFigureBlocks, newFigureBlocks);\n      return matchingBlocks;\n    }\n  }, {\n    key: \"findMatchingBlocks\",\n    value: function findMatchingBlocks(startInOld, endInOld, startInNew, endInNew, matchingBlocks, oldFigureBlocks, newFigureBlocks) {\n      var match = this.findMatch(startInOld, endInOld, startInNew, endInNew, oldFigureBlocks, newFigureBlocks);\n      if (match !== null) {\n        if (startInOld < match.startInOld && startInNew < match.startInNew) {\n          this.findMatchingBlocks(startInOld, match.startInOld, startInNew, match.startInNew, matchingBlocks, oldFigureBlocks, newFigureBlocks);\n        }\n        matchingBlocks.push(match);\n        if (match.endInOld < endInOld && match.endInNew < endInNew) {\n          this.findMatchingBlocks(match.endInOld, endInOld, match.endInNew, endInNew, matchingBlocks, oldFigureBlocks, newFigureBlocks);\n        }\n      }\n    }\n  }, {\n    key: \"findMatch\",\n    value: function findMatch(startInOld, endInOld, startInNew, endInNew, oldFigureBlocks, newFigureBlocks) {\n      for (var i = this.matchGranularity; i > 0; i--) {\n        var options = new _MatchOptions__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n        options.blockSize = i;\n        options.repeatingWordsAccuracy = this.repeatingWordsAccuracy;\n        options.ignoreWhitespaceDifferences = this.ignoreWhiteSpaceDifferences;\n        options.oldFigureBlocks = oldFigureBlocks;\n        options.newFigureBlocks = newFigureBlocks;\n        var finder = new _MatchFinder__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.oldWords, this.newWords, startInOld, endInOld, startInNew, endInNew, options);\n        var match = finder.findMatch();\n        if (match !== null) {\n          return match;\n        }\n      }\n      return null;\n    }\n  }]);\n}();\nHtmlDiff.execute = function (oldText, newText) {\n  console.log(\"executing\");\n  return new HtmlDiff(oldText, newText).build();\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HtmlDiff);\nwindow.HtmlDiff = HtmlDiff;\n\n//# sourceURL=webpack://htmldiff/./src/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});